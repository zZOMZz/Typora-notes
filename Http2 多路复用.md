# Http/2 多路复用

在 HTTP/2 中，多个帧可能会以不同的顺序到达，这是由于帧在传输过程中可能会被网络丢弃、拆分、重组或延迟等原因造成的。

为了解决这个问题，HTTP/2 在每个帧的首部都包含了一个帧标识符（Frame Identifier），用于标识该帧所属的数据流和帧类型。通过帧标识符，HTTP/2 可以将不同的帧重新组装成完整的数据流，确保数据的有序性和完整性。

具体来说，HTTP/2 使用了两种技术来确保数据的有序性和完整性：

1. 依赖流（Dependency）：HTTP/2 中每个数据流都可以设置一个依赖流和一个权重值，用于定义该数据流的优先级。当多个数据流的帧到达时，HTTP/2 可以根据数据流的优先级和依赖关系来确定帧的处理顺序，确保数据流的有序性。
2. 流量控制（Flow Control）：HTTP/2 中每个数据流都有一个流量窗口（Flow Window），用于控制该数据流发送方可以发送的数据量。当接收方收到数据时，会返回一个窗口更新（Window Update）帧，告诉发送方当前窗口大小，以便发送方可以控制数据发送的速率，从而确保数据流的完整性。

综上所述，HTTP/2 通过帧标识符、依赖流和流量控制等技术来确保数据的有序性和完整性，即使多个帧以不同的顺序到达，也可以被正确地组装成完整的数据流。

