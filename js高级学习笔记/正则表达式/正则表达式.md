[toc]

# 正则表达式

- 是字符串匹配的利器

## 一. 简单介绍使用

```js
// 创建正则表达式: 
// 1. 构造函数: new RegExp(pattern(匹配的规则),flags(匹配的一些修饰))
// 2. 字面量: 直接写: /sssss/i   中间写规则,后面写修饰
const re1 = new RegExp("abc","ig")   //   "i"表示ignore忽略大小写, "g"表示找到所有符合的
const newMessage = message.replaceAll(re1,"cba")
```

![Snipaste_2022-12-16_22-17-41](.\图片\Snipaste_2022-12-16_22-17-41.png)

## 二. 使用正则的函数

- 这里都是实例上的方法,不是类方法

- String方法:
  - matchAll: 查找所有匹配, 返回一个迭代器(iterator), 传入的正则必须加`g`,for..of遍历
  - **match**: 在一个字符串中测试是否匹配的字符串方法,返回一个数组,没有匹配时则返回null
  - search: 返回匹配到的位置索引
  - replace: 查找匹配到的字符串并进行替换
  - split: 使用正则表达式或者字符串分割一个字符串,并将其存入一个数组中
- RegExp方法:
  - exec: 字符串中执行查找匹配的RegExp方法,返回一个数组(未匹配到则返回null)
  - **test:** 返回是否匹配到了,boolean



## 三. 正则匹配规则

- 开头结尾:

  - `^`表示开头整个字符

  - `$`表示结尾的整个字符

- 具体匹配规则

  - `/^a{5,8}$/`, {}表示5到8个

  - `\d ` === `[0,9]`匹配一个数字

  - `\s`: 匹配空格符号

  - `\t`: tab制表符

  - `\n`: 换行符

  - `\w`: "单字"字符: 拉丁字母或数字或下滑线

  - `.`: 点,匹配除了换行符`\n`之外的任何字符

  - `\D`: 非数字: 除了`\d`以外的任何字符,例如字母

  - `\S` 非空格符号: 除了`\s`以外的任何字符

  - `\W` 非单字字符: 除了`\w`以外的任何字符

  - `\b`词边界,`\bname\b`表示name必须是一个单独的单词, 不能有`\w`中的字符

- 量词:
  - `?`: 在某一个字符后面加上`?`,表示该字符是0个或者1个
  - `+`  === `{1,}` 至少有一个,也可以有无限多个
  - `*`代表0个或者多个等价于`{0,}`
- 集合
  - `[0123456789]`表示匹配0到9这几个字符(一位), 简写:`[0,9]` 与`\d`相同,`[a-zA-Z0-9]`与`\w`相同
  - `{,}`表示位数,`,`前表示下限, `,`后面表示上限
- 匹配模式
  - 贪婪模式: 在可匹配与可不匹配的时候，优先匹配
    - 在找到匹配的内容后,继续向后查找 `/<<.+>>/`
    - 匹配出来: <<阿松大阿萨>> ssss <<啊实打实啊>> 杀杀杀<<Ssss>>
    - 等效于一口将字符串全部吃掉, 再从右边一个个吐出来直到匹配
  - 惰性模式: 在可匹配与可不匹配的时候，优先不匹配
    - `/<<.+?>>/`
    - 等效于从左边第一个匹配字符串第一个字符开始的地方,一个一个的吃掉字符串,直到匹配为止

- 捕获组:
  - `()`将正则中利用括号括起来的内容进行捕获, 捕获的内容何以在matchAll生成的iterator中单独提取,也可以在`match`上单独提取匹配字符串中的一部分
  - 也可以使用`()`使其中的内容成为一个整体`/(abc){2,}/` 指abc这个整体出现2次以上

```js
const message = "最重点阿松大, 《阿松大》和 《阿萨》"
// 懒惰模式
const name = /(《.+?》)/ig
const iterator = message.matchAll(name)
for(const item of iterator){
    connsole.log(item[1])
}
```

字符串数字 * 数字 = 数字

```js
"123" * 2 = 246
```

